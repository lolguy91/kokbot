'use strict';
const fs =
	typeof window === 'undefined' || typeof localStorage === 'undefined'
		? require('fs')
		: {
				writeFileSync: (path, data) => {
					window.localStorage.setItem(`doge-json_${path}`, data);
				},
				existsSync: (path) => `doge-json_${path}` in window.localStorage,
				readFileSync: (path) =>
					window.localStorage.getItem(`doge-json_${path}`) || '',
				readdirSync: (path) =>
					Object.keys(window.localStorage)
						.filter((a) => a.includes(path))
						.map((a) => a.slice(a.indexOf(path) + path.length)),
				mkdirSync: (path) =>
					window.localStorage.setItem(
						`doge-json_${path}`,
						JSON.stringify(fs.readdirSync(path))
					),
				statSync: (path) => ({
					isFile: () => !!window.localStorage.getItem(path),
					isDirectory: () => !window.localStorage.getItem(path),
				}),
		  };
module.exports = fs;
